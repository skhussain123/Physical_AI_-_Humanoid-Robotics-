# Data Model: RAG Agent Backend with FastAPI

## Entity: UserQuery
- **Fields**:
  - query (string, required): The question or input from the user to be processed by the AI tutor
  - timeout (integer, optional): Maximum time to wait for response (default: 30 seconds)
- **Validation**:
  - query must be between 1-1000 characters
  - query must not contain malicious content (XSS prevention)
- **Relationships**: None
- **State transitions**: None

## Entity: AIResponse
- **Fields**:
  - response (string, required): The answer generated by the AI agent based on retrieved content
  - status (string, required): Status of the response ("success", "no_content", "error")
  - metadata (object, optional): Additional information about the response
    - source_documents (array, optional): List of source documents used
    - confidence (number, optional): Confidence level of the response (0-1)
- **Validation**:
  - response must be provided when status is "success"
  - status must be one of the allowed values
- **Relationships**: None
- **State transitions**: None

## Entity: AgentConfiguration
- **Fields**:
  - model_name (string, required): Name of the model to use (e.g., "gemini-2.5-flash")
  - api_key (string, required): API key for the model provider
  - base_url (string, required): Base URL for the model provider API
  - tools (array of functions, required): List of available tools for the agent
- **Validation**:
  - model_name must be a valid model identifier
  - api_key must be provided
  - base_url must be a valid URL
- **Relationships**: None
- **State transitions**: None

## Entity: QdrantConnection
- **Fields**:
  - url (string, required): URL of the Qdrant Cloud instance
  - api_key (string, required): API key for Qdrant Cloud access
  - collection_name (string, required): Name of the collection to query ("humanoid_ai_book")
- **Validation**:
  - url must be a valid URL
  - api_key must be provided
  - collection_name must exist in Qdrant
- **Relationships**: None
- **State transitions**: None

## Entity: CohereClient
- **Fields**:
  - api_key (string, required): API key for Cohere service
  - model_name (string, required): Name of the embedding model ("embed-english-v3.0")
  - input_type (string, required): Type of input for embedding ("search_query")
- **Validation**:
  - api_key must be provided
  - model_name must be a valid Cohere model
  - input_type must be valid for the model
- **Relationships**: None
- **State transitions**: None

## Entity: APIEndpoint
- **Fields**:
  - method (string, required): HTTP method ("GET", "POST")
  - path (string, required): API path ("/ask", "/check")
  - request_schema (object, required): Schema for request validation
  - response_schema (object, required): Schema for response validation
- **Validation**:
  - method must be a valid HTTP method
  - path must be a valid API path
  - schemas must be valid JSON Schema
- **Relationships**: None
- **State transitions**: None

## Entity: ServiceHealth
- **Fields**:
  - status (string, required): Overall service status ("healthy", "degraded", "unhealthy")
  - timestamp (string, required): ISO 8601 timestamp of the check
  - checks (object, optional): Detailed status of individual components
    - cohere_status (string): Status of Cohere connectivity
    - qdrant_status (string): Status of Qdrant connectivity
    - agent_status (string): Status of agent functionality
- **Validation**:
  - status must be one of the allowed values
  - timestamp must be a valid ISO 8601 string
- **Relationships**: None
- **State transitions**: None